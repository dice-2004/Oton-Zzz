# ✨ Oton-Zzz 機能一覧

Oton-Zzzシステムが提供する主要な機能の概要です。

## 1. 😴 高精度な睡眠検出 (Core System)

カメラ映像からリアルタイムでユーザーの睡眠状態を判定します。

- **MediaPipe Face Landmarker**: 高速かつ高精度な顔・目の検出。
- **睡眠ゲージシステム**: 単なる「目を閉じた瞬間」ではなく、継続的な閉眼状態をゲージとして蓄積し、誤検知を防ぎます。
- **2段階検知フロー**:
    - **Stage 1 (警告)**: 眠気を検知すると、音声とLEDで優しく警告します。
    - **Stage 2 (確定)**: そのまま眠り続けると、寝落ちと判定してテレビを消します。

## 2. 📺 テレビ状態との完全同期

テレビの電源状態とシステムが連動し、無駄な動作を防ぎます。

- **IRリモコン信号監視**: ユーザーがリモコンでテレビを操作した信号を検知します。
- **自動モード切替**:
    - **ACTIVEモード**: テレビがついている時のみ、睡眠検出を行います。
    - **SLEEPモード**: テレビが消えている時は検出を停止し、待機状態になります。
- **スマート復帰**: 寝落ちで消えた後、リモコンでテレビをつけると、即座に検出を再開します（誤検知防止のクールタイム付き）。

## 3. 📊 Webダッシュボード

日々の睡眠習慣や節約効果を可視化します。

- **アクセス**: `http://localhost:5000`
- **主な機能**:
    - **週間レポート**: 過去7日間の寝落ち回数をグラフ表示。
    - **節約効果**: テレビを自動で消したことによる電気代の節約額を表示。
    - **活動記録**: 詳細なログ（いつ寝落ちしたか、いつテレビをつけたか）を確認可能。
- **デザイン**: 親しみやすい「おとん」ブランドのデザイン。

## 4. 💾 データ管理

- **SQLiteデータベース**: 全てのイベント（TV_ON, TV_OFF, SLEEP_DETECTED）をローカルに保存。
- **プライバシー重視**: カメラ映像は保存されず、処理はすべてデバイス内で完結します。

## 5. 🔊 音声 & LED フィードバック

- **OpenJTalk**: 状況に応じた音声アナウンス（「起動」「警告」「おやすみなさい」など）。
- **ステータスLED**:
    - 🟢 緑: 監視中 (ACTIVE)
    - 🟡 黄: 警告 (Stage 1)
    - 🔴 赤: 待機中 (SLEEP)
